#peripheral.yaml

#See https://www.bluetooth.com/specifications/assigned-numbers/

peripheral:
  localName: Bloxy
  appearance: 960  # Mouse/Keyboard Combo.  
  services:
    - name: HID service
      uuid: 00001812-0000-1000-8000-00805f9b34fb
      description: Human Interface Device Service
      type: primary
      characteristics:
        - name: HID Information
          uuid: 00002a4a-0000-1000-8000-00805f9b34fb
          description: HID Information (Version, Country Code, Flags)
          value: 
            - 0x11 # HID Minor Version 11
            - 0x01 # HID Major Version 1
            - 0x00 # Country Code 0 (not localized)
            - 0x03 # Flags 3 (normally used)
          notifying: false
          flags: [read]
          descriptors: []
        - name: HID Report Map
          uuid: 00002a4b-0000-1000-8000-00805f9b34fb
          description: HID Report Map characteristic (defines HID structure)
          value:
            #....UsagePage(Generic Desktop[0x0001])
            - 05
            - 01
            #....UsageId(Keyboard[0x0006])
            - 09
            - 06
            #....Collection(Application)
            - A1
            - 01
            #........ReportId(1)
            - 85
            - 01
            #........UsagePage(Keyboard/Keypad[0x0007])
            - 05
            - 07
            #........UsageIdMin(Keyboard LeftControl[0x00E0])
            - 19
            - E0
            #........UsageIdMax(Keyboard Right GUI[0x00E7])
            - 29
            - E7
            #........LogicalMinimum(0)
            - 15
            - 00
            #........LogicalMaximum(1)
            - 25
            - 01
            #........ReportCount(8)
            - 95
            - 08
            #........ReportSize(1)
            - 75
            - 01
            #........Input(Data, Variable, Absolute, NoWrap, Linear, PreferredState, NoNullPosition, BitField)
            - 81
            - 02
            #........UsageIdMin(ErrorRollOver[0x0001])
            - 19
            - 01
            #........UsageIdMax(Keyboard Application[0x0065])
            - 29
            - 65
            #........LogicalMinimum(1)
            - 15
            - 01
            #........LogicalMaximum(101)
            - 25
            - 65
            #........ReportSize(7)
            - 75
            - 07
            #........Input(Data, Array, Absolute, NoWrap, Linear, PreferredState, NoNullPosition, BitField)
            - 81
            - 00
            #........UsagePage(LED[0x0008])
            - 05
            - 08
            #........UsageIdMin(Num Lock[0x0001])
            - 19
            - 01
            #........UsageIdMax(Kana[0x0005])
            - 29
            - 05
            #........LogicalMinimum(0)
            - 15
            - 00
            #........LogicalMaximum(1)
            - 25
            - 01
            #........ReportCount(5)
            - 95
            - 05
            #........ReportSize(1)
            - 75
            - 01
            #........Output(Data, Variable, Absolute, NoWrap, Linear, PreferredState, NoNullPosition, NonVolatile, BitField)
            - 91
            - 02
            #........ReportCount(1)
            - 95
            - 01
            #........ReportSize(3)
            - 75
            - 03
            #........Output(Constant, Variable, Absolute, NoWrap, Linear, PreferredState, NoNullPosition, NonVolatile, BitField)
            - 91
            - 03
            #....EndCollection()
            - C0
            #....UsagePage(Generic Desktop[0x0001])
            - 05
            - 01
            #....UsageId(Mouse[0x0002])
            - 09
            - 02
            #....Collection(Application)
            - A1
            - 01
            #........ReportId(2)
            - 85
            - 02
            #........UsageId(Pointer[0x0001])
            - 09
            - 01
            #........Collection(Physical)
            - A1
            - 00
            #............UsageId(X[0x0030])
            - 09
            - 30
            #............UsageId(Y[0x0031])
            - 09
            - 31
            #............LogicalMinimum(-128)
            - 15
            - 80
            #............LogicalMaximum(127)
            - 25
            - 7F
            #............ReportCount(2)
            - 95
            - 02
            #............ReportSize(8)
            - 75
            - 08
            #............Input(Data, Variable, Relative, NoWrap, Linear, PreferredState, NoNullPosition, BitField)
            - 81
            - 06
            #............UsagePage(Button[0x0009])
            - 05
            - 09
            #............UsageIdMin(Button 1[0x0001])
            - 19
            - 01
            #............UsageIdMax(Button 3[0x0003])
            - 29
            - 03
            #............LogicalMinimum(0)
            - 15
            - 00
            #............LogicalMaximum(1)
            - 25
            - 01
            #............ReportCount(3)
            - 95
            - 03
            #............ReportSize(1)
            - 75
            - 01
            #............Input(Data, Variable, Absolute, NoWrap, Linear, PreferredState, NoNullPosition, BitField)
            - 81
            - 02
            #........EndCollection()
            - C0
            #........ReportCount(1)
            - 95
            - 01
            #........ReportSize(5)
            - 75
            - 05
            #........Input(Constant, Variable, Absolute, NoWrap, Linear, PreferredState, NoNullPosition, BitField)
            - 81
            - 03
            #....EndCollection()
            - C0
  

          notifying: false
          flags: [read]
          descriptors:
            - name: Battery Service External Report Reference Descriptor
              uuid: 00002907-0000-1000-8000-00805f9b34fb
              description: External Report Reference Descriptor linking to Battery Service
              value:
                - 0x0F # UUID 0x180F (Battery Service)
                - 0x18
              flags: [read]
        - name: HID Protocol Mode
          uuid: 00002a4e-0000-1000-8000-00805f9b34fb
          description: Protocol Mode characteristic (Report Mode = 1)
          value: 
            - 0x01
          notifying: false
          flags: [read, write-without-response]
          descriptors: []
        - name: HID Control Point
          uuid: 00002a4c-0000-1000-8000-00805f9b34fb
          description: HID Control Point characteristic (used to suspend/resume)
          value: 
            - 0x01
          notifying: false
          flags: [write-without-response]
          descriptors: []
        - name: HID Report - Input (Keyboard)
          uuid: 00002a4d-0000-1000-8000-00805f9b34fb
          description: HID Report - Input (Keyboard)
          value:
            - 0x01
            - 0x00  # Modifier keys
            - 0x00  # Reserved
            - 0x00  # Keycode 1
            - 0x00  # Keycode 2
            - 0x00  # Keycode 3
            - 0x00  # Keycode 4
            - 0x00  # Keycode 5
            - 0x00  # Keycode 6
          notifying: false
          flags: [read, notify, encrypt-notify]

          descriptors:
            - name: Report Reference Descriptor
              uuid: 00002908-0000-1000-8000-00805f9b34fb
              value:
                - 0x01  # Report ID 1
                - 0x01  # Input Report
              flags: [read]
            - name: Client Characteristic Configuration Descriptor
              uuid: 00002902-0000-1000-8000-00805f9b34fb
              value: [0x00, 0x00]
              flags: [read, write]
        - name: HID Report - Input (Mouse)
          uuid: 00002a4d-0000-1000-8000-00805f9b34fb
          description: HID Report - Input (Mouse)
          value:
            - 0x02
            - 0x00  # Buttons
            - 0x00  # X delta
            - 0x00  # Y delta
          notifying: false
          flags: [read, notify, encrypt-notify]
          descriptors:
            - name: Report Reference Descriptor
              uuid: 00002908-0000-1000-8000-00805f9b34fb
              value:
                - 0x02  # Report ID 2
                - 0x01  # Input Report
              flags: [read]
            - name: Client Characteristic Configuration Descriptor
              uuid: 00002902-0000-1000-8000-00805f9b34fb
              value: [0x00, 0x00]
              flags: [read, write]
        - name: HID Report - Output (Keyboard LEDs)
          uuid: 00002a4d-0000-1000-8000-00805f9b34fb
          description: HID Report - Output (Keyboard LEDs)
          value: [0x00]
          notifying: false
          flags: [read, write]
          descriptors:
            - name: Report Reference Descriptor
              uuid: 00002908-0000-1000-8000-00805f9b34fb
              value: [0x01, 0x02]   # Report ID 1, Output
              flags: [read]
        - name: Boot Keyboard Input Report
          uuid: 00002a22-0000-1000-8000-00805f9b34fb
          description: Boot Keyboard Input Report
          value: [0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00]
          notifying: false
          flags: [read, notify, encrypt-notify]
          descriptors:
            - name: Client Characteristic Configuration Descriptor
              uuid: 00002902-0000-1000-8000-00805f9b34fb
              value: [0x00, 0x00]
              flags: [read, write]
        - name: Boot Keyboard Output Report
          uuid: 00002a32-0000-1000-8000-00805f9b34fb
          description: Boot Keyboard Output Report
          value: [0x00]
          notifying: false
          flags: [read, write, write-without-response]
          descriptors: []
        - name: Boot Mouse Input Report
          description: Boot Mouse Input Report
          uuid: 00002a33-0000-1000-8000-00805f9b34fb
          value: [0x00,0x00,0x00]
          notifying: false
          flags: [read, notify, encrypt-notify]
          descriptors:
            - name: Client Characteristic Configuration Descriptor
              uuid: 00002902-0000-1000-8000-00805f9b34fb
              value: [0x00, 0x00]
              flags: [read, write]
    - name: Battery Service
      uuid: 0000180f-0000-1000-8000-00805f9b34fb
      description: Battery Service
      type: primary
      characteristics:
        - name: Battery Level
          uuid: 00002a19-0000-1000-8000-00805f9b34fb
          description: Battery Level characteristic
          value:
            - 0x64 # Battery level at 100%
          notifying: false
          flags: [read, notify]
          descriptors:
            - name: Client Characteristic Configuration Descriptor
              uuid: 00002902-0000-1000-8000-00805f9b34fb
              description: Enables notifications or indications
              value:
                - 0x00
                - 0x00
              flags: [read, write]
    - name: Device Information Service
      uuid: 0000180a-0000-1000-8000-00805f9b34fb
      description: Device Information Service
      type: primary
      characteristics:
        - name: Manufacturer Name String
          uuid: 00002a29-0000-1000-8000-00805f9b34fb
          description: Manufacturer Name String characteristic
          value:
            - 0x4D # 'M'
            - 0x65 # 'e'
            - 0x65 # 'e'
            - 0x68 # 'h'
            - 0x6F # 'o'
            - 0x67 # 'g'
            - 0x20 # ' '
            - 0x43 # 'C'
            - 0x6F # 'o'
            - 0x2E # '.'
          notifying: false
          flags: [read]
          descriptors: []
        - name: Model Number String
          uuid: 00002a24-0000-1000-8000-00805f9b34fb
          description: Model Number String characteristic
          value:
            - 0x42 # 'B'
            - 0x6C # 'l'
            - 0x6F # 'o'
            - 0x78 # 'x'
            - 0x79 # 'y'
          notifying: false
          flags: [read]
          descriptors: []
        - name: Serial Number String
          uuid: 00002a25-0000-1000-8000-00805f9b34fb
          description: Serial Number String characteristic
          value:
            - 0x30 # '0'
            - 0x30 # '0'
            - 0x31 # '1'
          notifying: false
          flags: [read]
          descriptors: []
        - name: Firmware Revision String
          uuid: 00002a26-0000-1000-8000-00805f9b34fb
          description: Firmware Revision String characteristic
          value:
            - 0x31 # '1'
            - 0x2E # '.'
            - 0x30 # '0'
            - 0x2E # '.'
            - 0x30 # '0'
          notifying: false
          flags: [read]
          descriptors: []
        - name: Hardware Revision String
          uuid: 00002a27-0000-1000-8000-00805f9b34fb
          description: Hardware Revision String characteristic
          value:
            - 0x31 # '1'
            - 0x2E # '.'
            - 0x30 # '0'
          notifying: false
          flags: [read]
          descriptors: []
        - name: Software Revision String
          uuid: 00002a28-0000-1000-8000-00805f9b34fb
          description: Software Revision String characteristic
          value:
            - 0x31 # '1'
            - 0x2E # '.'
            - 0x30 # '0'
          notifying: false
          flags: [read]
          descriptors: []
        - name: System ID
          uuid: 00002a23-0000-1000-8000-00805f9b34fb
          description: System ID characteristic
          value:
            - 0x12
            - 0x34
            - 0x56
            - 0xFF
            - 0xFE
            - 0x9A
            - 0xBC
            - 0xDE
          notifying: false
          flags: [read]
          descriptors: []
        - name: PnP ID
          uuid: 00002a50-0000-1000-8000-00805f9b34fb
          description: Plug and Play ID characteristic
          value: [0x01, 0xFF, 0xFF, 0x34, 0x12, 0x00, 0x01]
          notifying: false
          flags: [read]
          descriptors: []
