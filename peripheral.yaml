#peripheral.yaml

peripheral:
  localName: Bloxy
  appearance: 960  # Mouse/Keyboard Combo
  services:
    - name: HID service
      uuid: 00001812-0000-1000-8000-00805f9b34fb
      description: Human Interface Device Service
      type: primary
      characteristics:
        - name: HID Information
          uuid: 00002a4a-0000-1000-8000-00805f9b34fb
          description: HID Information (Version, Country Code, Flags)
          value:
            - 0x11  # HID Minor Version (0x11 = 17 -> version 1.17)
            - 0x01  # HID Major Version (0x01 = 1)
            - 0x00  # Country Code (0 = not localized)
            - 0x02  # Flags (0x02 = RemoteWake supported)
          notifying: false
          flags: [read]
          descriptors: []

        - name: HID Report Map
          uuid: 00002a4b-0000-1000-8000-00805f9b34fb
          description: HID Report Map characteristic (defines HID structure)
          value:
            # Keyboard Collection
            - 0x05
            - 0x01
            - 0x09
            - 0x06
            - 0xA1
            - 0x01
            - 0x85
            - 0x01
            - 0x05
            - 0x07
            - 0x19
            - 0xE0
            - 0x29
            - 0xE7
            - 0x15
            - 0x00
            - 0x25
            - 0x01
            - 0x75
            - 0x01
            - 0x95
            - 0x08
            - 0x81
            - 0x02
            - 0x75
            - 0x08
            - 0x95
            - 0x01
            - 0x81
            - 0x01
            - 0x75
            - 0x08
            - 0x95
            - 0x06
            - 0x15
            - 0x00
            - 0x25
            - 0x65
            - 0x05
            - 0x07
            - 0x19
            - 0x00
            - 0x29
            - 0x65
            - 0x81
            - 0x00
            - 0xC0
            # MousCollection
            - 0x05
            - 0x01
            - 0x09
            - 0x02
            - 0xA1
            - 0x01
            - 0x85
            - 0x02
            - 0x09
            - 0x01
            - 0xA1
            - 0x00
            - 0x05
            - 0x09
            - 0x19
            - 0x01
            - 0x29
            - 0x03
            - 0x15
            - 0x00
            - 0x25
            - 0x01
            - 0x75
            - 0x01
            - 0x95
            - 0x03
            - 0x81
            - 0x02
            - 0x75
            - 0x05
            - 0x95
            - 0x01
            - 0x81
            - 0x01
            - 0x05
            - 0x01
            - 0x09
            - 0x30
            - 0x09
            - 0x31
            - 0x15
            - 0x81
            - 0x25
            - 0x7F
            - 0x75
            - 0x08
            - 0x95
            - 0x02
            - 0x81
            - 0x06

            # Usage (Wheel)
            - 0x09
            - 0x38

            # Logical Minimum (-127)
            - 0x15
            - 0x81

            # Logical Maximum (127)
            - 0x25
            - 0x7F

            # Report Size (8 bits)
            - 0x75
            - 0x08

            # Report Count (1)
            - 0x95
            - 0x01

            # Input (Data, Variable, Relative)
            - 0x81
            - 0x06

            - 0xC0
            - 0xC0
          notifying: false
          flags: [read]
          descriptors:
            - name: Battery Service External Report Reference Descriptor
              uuid: 00002907-0000-1000-8000-00805f9b34fb
              description: External Report Reference Descriptor linking to Battery Service
              value: [0x0F, 0x18]
              flags: [read]

        - name: HID Protocol Mode
          uuid: 00002a4e-0000-1000-8000-00805f9b34fb
          description: Protocol Mode characteristic (Report Mode = 1)
          value: [0x01]
          notifying: false
          flags: [read, write-without-response]
          descriptors: []

        - name: HID Control Point
          uuid: 00002a4c-0000-1000-8000-00805f9b34fb
          description: HID Control Point characteristic (used to suspend/resume)
          value: [0x00]
          notifying: false
          flags: [write-without-response]
          descriptors: []

        - name: HID Report - Input (Keyboard)
          uuid: 00002a4d-0000-1000-8000-00805f9b34fb
          description: HID Report - Input (Keyboard)
          value: [0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]
          notifying: true
          flags: [read, notify]
          descriptors:
            - name: Report Reference Descriptor
              uuid: 00002908-0000-1000-8000-00805f9b34fb
              value: [0x01, 0x01]
              flags: [read]
            - name: Client Characteristic Configuration Descriptor
              uuid: 00002902-0000-1000-8000-00805f9b34fb
              value: [0x00, 0x00]
              flags: [read, write]

        - name: HID Report - Input (Mouse)
          uuid: 00002a4d-0000-1000-8000-00805f9b34fb
          description: HID Report - Input (Mouse)
          value: [0x02, 0x00, 0x00, 0x00, 0x00]
          notifying: true
          flags: [read, notify]
          descriptors:
            - name: Report Reference Descriptor
              uuid: 00002908-0000-1000-8000-00805f9b34fb
              value: [0x02, 0x01]
              flags: [read]

        - name: HID Report - Output (Keyboard LEDs)
          uuid: 00002a4d-0000-1000-8000-00805f9b34fb
          description: HID Report - Output (Keyboard LEDs)
          value: [0x01, 0x00]
          notifying: false
          flags: [read, write, write-without-response]
          descriptors:
            - name: Report Reference Descriptor
              uuid: 00002908-0000-1000-8000-00805f9b34fb
              value: [0x01, 0x02]
              flags: [read]

#        - name: Boot Keyboard Input Report
          uuid: 00002a22-0000-1000-8000-00805f9b34fb
          description: Boot Keyboard Input Report
          value: [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]
          notifying: true
          flags: [read, notify]
          descriptors: []
#
#        - name: Boot Keyboard Output Report
          uuid: 00002a32-0000-1000-8000-00805f9b34fb
          description: Boot Keyboard Output Report
          value: [0x00]
          notifying: false
          flags: [read, write, write-without-response]
          descriptors: []
#
#        - name: Boot Mouse Input Report
#          uuid: 00002a33-0000-1000-8000-00805f9b34fb
#          description: Boot Mouse Input Report
#          value: [0x00, 0x00, 0x00]
#          notifying: true
#          flags: [read, notify]
#          descriptors: []

        - name: HID Report - Feature (Battery Stub)
          uuid: 00002a4d-0000-1000-8000-00805f9b34fb
          description: Feature Report (Report ID 3)
          value: [0x03, 0x00]
          notifying: false
          flags: [read]
          descriptors:
            - name: Report Reference Descriptor
              uuid: 00002908-0000-1000-8000-00805f9b34fb
              value: [0x03, 0x03]
              flags: [read]

    - name: Battery service
      uuid: 0000180f-0000-1000-8000-00805f9b34fb
      description: Battery Service
      type: primary
      characteristics:
        - name: Battery Level
          uuid: 00002a19-0000-1000-8000-00805f9b34fb
          description: Battery Level
          value: [100]  # Battery percentage 100%
          notifying: true
          flags: [read, notify]
          descriptors:
            - name: Presentation Format
              uuid: 00002904-0000-1000-8000-00805f9b34fb
              description: Format=uint8, Exponent=0, Unit=percentage
              value: [0x04, 0x00, 0xAD, 0x27]  # Format=uint8(0x04), Exponent=0x00, Unit=0x27AD (LE)
              flags: [read]
            - name: Report Reference Descriptor
              uuid: 00002908-0000-1000-8000-00805f9b34fb
              description: Report Reference linking Battery Level into HID (Report ID 3, Input)
              value: [0x03, 0x01]
              flags: [read]
            - name: Client Characteristic Configuration Descriptor
              uuid: 00002902-0000-1000-8000-00805f9b34fb
              description: CCC for Battery notifications
              value: [0x00, 0x00]
              flags: [read, write]

    - name: Device Information service
      uuid: 0000180a-0000-1000-8000-00805f9b34fb
      description: Device Information Service
      type: primary
      characteristics:
        - name: Manufacturer Name String
          uuid: 00002a29-0000-1000-8000-00805f9b34fb
          description: Manufacturer
          value: [0x42, 0x6C, 0x6F, 0x78, 0x79]  # "Bloxy"
          notifying: false
          flags: [read]
          descriptors: []

        - name: PnP ID
          uuid: 00002a50-0000-1000-8000-00805f9b34fb
          description: PnP ID
          value: [0x01, 0x5D, 0x00, 0x12, 0x34, 0x00, 0x01]
          notifying: false
          flags: [read]
          descriptors: []

        - name: System ID
          uuid: 00002a23-0000-1000-8000-00805f9b34fb
          description: System ID
          value: [0x12, 0x34, 0x56, 0xFF, 0xFE, 0x9A, 0xBC, 0xDE]
          notifying: false
          flags: [read]
          descriptors: []

        - name: Serial Number String
          uuid: 00002a25-0000-1000-8000-00805f9b34fb
          description: Serial Number
          value: [0x53, 0x4E, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x30]  # "SN1234567890"
          notifying: false
          flags: [read]
          descriptors: []

        - name: Firmware Revision String
          uuid: 00002a26-0000-1000-8000-00805f9b34fb
          description: Firmware Revision
          value: [0x31, 0x2E, 0x30, 0x2E, 0x30]  # "1.0.0"
          notifying: false
          flags: [read]
          descriptors: []

        - name: Hardware Revision String
          uuid: 00002a27-0000-1000-8000-00805f9b34fb
          description: Hardware Revision
          value: [0x31, 0x2E, 0x30]  # "1.0"
          notifying: false
          flags: [read]
          descriptors: []

        - name: Software Revision String
          uuid: 00002a28-0000-1000-8000-00805f9b34fb
          description: Software Revision
          value: [0x31, 0x2E, 0x30, 0x2E, 0x30]  # "1.0.0"
          notifying: false
          flags: [read]
          descriptors: []